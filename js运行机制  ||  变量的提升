http://blog.csdn.net/yhawaii/article/details/7221568

<script type="text/javascript">  
    alert(i); // ?  
    var i = 1;  
</script>  

输出结果是undefined, 这种现象被称成“预解析”：JavaScript引擎会优先解析var变量和function定义。
在预解析完成后，才会执行代码。如果一个文档流中包含多个script代码段（用script标签分隔的js代码或引入的js文件），运行顺序是：
step1. 读入第一个代码段
step2. 做语法分析，有错则报语法错误（比如括号不匹配等），并跳转到step5
step3. 对var变量和function定义做“预解析”（永远不会报错的，因为只解析正确的声明）
step4. 执行代码段，有错则报错（比如变量未定义）
step5. 如果还有下一个代码段，则读入下一个代码段，重复step2
step6. 结束

<script type="text/javascript">  
    alert(i); // error: i is not defined.  
    i = 1;  
</script>  
为什么第一句会导致错误？JavaScript中，变量不是可以不定义吗？

变量的提升
http://blog.csdn.net/sunxing007/article/details/9034253

var foo = 1;
function bar() {
    alert(foo);
    var foo = 10;
    alert(foo);
}
bar();


var foo = 1;  
function bar() {  
    if (!foo) {  
        var foo = 10;  
    }  
    alert(foo);  
}  
bar();
